{% extends "main.html" %}
{% load static %}
{% block content %}

<body>
                <div class="container-fluid">
                    
                    <div class="row">
                        <div class="col-md-6 col-xl-3 mb-4"><a class="dashboard_link" href="#">
                                <div class="card shadow border-left-primary py-2">
                                    <div class="card-body">
                                        <div class="row g-0 align-items-center">
                                            <div class="col me-2">
                                                <div class="text-uppercase text-primary fw-bold text-xs mb-1"><span>Earnings (monthly)</span></div>
                                                <div class="text-dark fw-bold h5 mb-0"><span>${{ sum_of_earnings_month }}</span></div>
                                            </div>
                                            <div class="col-auto"><i class="fas fa-calendar fa-2x text-gray-300"></i></div>
                                        </div>
                                    </div>
                                </div>
                            </a></div>
                        <div class="col-md-6 col-xl-3 mb-4"><a class="dashboard_link" href="#">
                                <div class="card shadow border-left-success py-2">
                                    <div class="card-body">
                                        <div class="row g-0 align-items-center">
                                            <div class="col me-2">
                                                <div class="text-uppercase text-success fw-bold text-xs mb-1"><span>REAL EARNINGS</span></div>
                                                <div class="text-dark fw-bold h5 mb-0"><span>${{ real_earnings_this_month }}</span></div>
                                            </div>
                                            <div class="col-auto"><i class="fas fa-dollar-sign fa-2x text-gray-300"></i></div>
                                        </div>
                                    </div>
                                </div>
                            </a></div>
                        <div class="col-md-6 col-xl-3 mb-4"><a class="dashboard_link" href="#">
                                <div class="card shadow border-left-info py-2">
                                    <div class="card-body">
                                        <div class="row g-0 align-items-center">
                                            <div class="col me-2">
                                                <div class="text-uppercase text-info fw-bold text-xs mb-1"><span>Tasks completed</span></div>
                                                <div class="row g-0 align-items-center">
                                                    <div class="col-auto">
                                                        <div class="text-dark fw-bold h5 mb-0 me-3"><span>{{ percent_of_active_todo }}%</span></div>
                                                    </div>
                                                    <div class="col">
                                                        <div class="progress progress-sm">
                                                            <div class="progress-bar bg-info" aria-valuenow="{{ percent_of_active_todo }}" aria-valuemin="0" aria-valuemax="100" style="width: {{ percent_of_active_todo }}%;"><span class="visually-hidden"></span></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-auto"><i class="fas fa-clipboard-list fa-2x text-gray-300"></i></div>
                                        </div>
                                    </div>
                                </div>
                            </a></div>
                        <div class="col-md-6 col-xl-3 mb-4"><a class="dashboard_link" href="#">
                                <div class="card shadow border-left-warning py-2">
                                    <div class="card-body">
                                        <div class="row g-0 align-items-center">
                                            <div class="col me-2">
                                                <div class="text-uppercase text-warning fw-bold text-xs mb-1"><span>Important Tasks</span></div>
                                                <div class="text-dark fw-bold h5 mb-0"><span>{{ important_tasks_count }}</span></div>
                                            </div>
                                            <div class="col-auto"><i class="fas fa-clipboard-list fa-2x text-gray-300"></i></div>
                                        </div>
                                    </div>
                                </div>
                            </a></div>
                    </div>
                    <div class="row">
                        <div class="col-lg-7 col-xl-8">
                            <div class="card shadow mb-4">
                                <div class="card-header d-flex justify-content-between align-items-center"><a class="dashboard_link" href="{% url 'todolist:money_view' user_id=user_id %}">
                                        <h6 class="text-primary fw-bold m-0">Money Overview</h6>
                                    </a>
                                    
                                    
                                </div>
                                <div class="card-body">
                                    {% if earnings_to_billings_plot is not None %}
                                    <img src="data:image/png;base64,{{ earnings_to_billings_plot }}" alt="Wykres" style="max-width: 100%; height: auto;">
                                    {% else %}
                                    <p> Start adding earnings and bills to see the plot </p>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                            
                            
                    </div>
                    <div class="row">
                        <div class="col-lg-6 mb-4">
                            <div class="card shadow mb-4">
                                <div class="card-header py-3"><a class="dashboard_link" href="#">
                                        <h6 class="text-primary fw-bold m-0">Overview</h6>
                                    </a></div>
                                <div class="card-body">
                                    <h4 class="small fw-bold">Earnings<span class="float-end">${{ sum_of_earnings_month }}</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-info" aria-valuenow="{{percent_of_earnings_to_bills}}" aria-valuemin="0" aria-valuemax="100" style="width: {{percent_of_earnings_to_bills}}%;"><span class="visually-hidden">{{percent_of_earnings_to_bills}}%</span></div>
                                    </div>
                                    <h4 class="small fw-bold">Bills<span class="float-end">${{ billing_this_month }}</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-danger" aria-valuenow="{{percent_of_billings_to_earnings}}" aria-valuemin="0" aria-valuemax="100" style="width: {{percent_of_billings_to_earnings}}%;"><span class="visually-hidden">{{percent_of_billings_to_earnings}}%</span></div>
                                    </div>
                                    <h4 class="small fw-bold">Important Tasks<span class="float-end">{{ important_tasks_count }}</span></h4>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-warning" aria-valuenow="{{ percent_of_important_tasks }}" aria-valuemin="0" aria-valuemax="100" style="width: {{ percent_of_important_tasks }}%;"><span class="visually-hidden">{{ percent_of_important_tasks }}%</span></div>
                                    </div>
                                    <h4 class="small fw-bold">Tasks (completed) <span class="float-end">{{ percent_of_active_todo }}%</span></h4>
                                    <div class="progress mb-4" style="color: rgb(46,45,136);">
                                        <div class="progress-bar bg-primary" aria-valuenow="{{ percent_of_active_todo }}" aria-valuemin="0" aria-valuemax="100" style="width: {{ percent_of_active_todo }}%;"><span class="visually-hidden">{{ percent_of_active_todo }}%</span></div>
                                    </div>
                                </div>
                            </div>
                        </div> 
                        <div class="col-lg-6 mb-4">
                            <div class="card shadow mb-4">
                                <div class="card-header py-3"><a class="dashboard_link" href="#">
                                        <h6 class="text-primary fw-bold m-0">Important tasks</h6>
                                    </a></div>
                                    
                                <ul class="list-group list-group-flush">
                                    {% for task in important_tasks_5  %}
                                    <li class="list-group-item">
                                        <div class="row g-0 align-items-center">
                                            <div class="col me-2">
                                                <h6 class="mb-0"><strong>{{task.task}}</strong></h6><span class="text-xs">{{ task.created_at }}</span>
                                            </div>
                                            
                                        </div>
                                    </li>
                                    {% endfor %}
                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <footer class="bg-white sticky-footer">
                <div class="container my-auto">
                    <div class="text-center my-auto copyright"><span>Copyright Â© no-ppp 2024</span></div>
                </div>
            </footer>
        </div><a class="border rounded d-inline scroll-to-top" href="#page-top"><i class="fas fa-angle-up"></i></a>
    </div>
</body>
{% endblock content %}